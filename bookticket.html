<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sơ đồ chọn ghế</title>
    <link rel="stylesheet" href="assets/bookticket.css" />
    
  </head>
  <body>
    <div class="main-header-area">
        <div class="container">
          <div class="row">
            <div class="col-lg-3">
              <div class="site-logo">
                <a href="https://starlight.vn/">
                  <img src="images/logo.png" alt="filmoja">
                </a>
              </div>
            </div>
            <div class="col-lg-9">
              <div class="mainmenu">
                <nav>
                  <ul id="responsive_navigation">
                    <li><a href="https://starlight.vn/">Trang chủ</a></li>
                    <li><a href="https://starlight.vn/lich-chieu.html">Lịch chiếu</a></li>
                    <li>
                      <a href="#">Phim</a>
                      <ul>
                        <li><a href="https://starlight.vn/phim.html">Phim Đang Chiếu</a></li>
                        <li><a href="https://starlight.vn/phim-sap-chieu.html">Phim Sắp Chiếu</a></li>
                      </ul>
                    </li>
                    <li><a href="https://starlight.vn/uu-dai.html">Khuyến Mãi</a></li>
                    <li><a href="https://starlight.vn/tin-tuc.html">Điện Ảnh</a></li>
                    <li><a href="https://starlight.vn/lien-he.html">Liên hệ</a></li>
                    <li><a href="https://starlight.vn/tuyen-dung.html">Tuyển dụng</a></li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    <div class="screen-thumb"> 
        <h4 class ="screen">MÀN HÌNH</h4>  
        <img class="screen-image" src="http://pixner.net/boleto/demo/assets/images/movie/screen-thumb.png" alt="movie">
    </div>
    <div class="seat-container" id="seat-container"></div>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-color legend-regular"></div> Ghế thường
      </div>
      <div class="legend-item">
        <div class="legend-color legend-couple"></div> Ghế đôi
      </div>
      <div class="legend-item">
        <div class="legend-color legend-vip"></div> Ghế VIP
      </div>
      <div class="legend-item">
        <div class="legend-color legend-selected"></div> Ghế đã chọn
      </div>
    </div>

    <p>Ghế đã chọn: <span id="selected-seats">None</span></p>
    <p>Tổng tiền: <span id="total-price">0</span> VND</p>
    <button id="next-btn">NEXT</button>

    <script>
      // Mảng cấu trúc ghế, mỗi phần tử là 1 hàng ghế với loại ghế tương ứng
      const seatLayout = [
        ['regular', 'regular', 'couple', 'couple', 'regular', 'regular', 'vip', 'vip', 'regular', 'regular', 'couple', 'couple', 'regular', 'regular'],
        ['regular', 'regular', 'couple', 'couple', 'regular', 'regular', 'vip', 'vip', 'regular', 'regular', 'couple', 'couple', 'regular', 'regular'],
        ['regular', 'regular', 'couple', 'couple', 'regular', 'regular', 'vip', 'vip', 'regular', 'regular', 'couple', 'couple', 'regular', 'regular'],
        ['regular', 'regular', 'couple', 'couple', 'regular', 'regular', 'vip', 'vip', 'regular', 'regular', 'couple', 'couple', 'regular', 'regular'],
        ['regular', 'regular', 'couple', 'couple', 'regular', 'regular', 'vip', 'vip', 'regular', 'regular', 'couple', 'couple', 'regular', 'regular']      
        ];

      const seatContainer = document.getElementById('seat-container');
      let selectedSeats = [];
      let ticketPrices = { regular: 100000, couple: 150000, vip: 200000 };

      // Duyệt qua mảng layout và tạo ghế động
      seatLayout.forEach((rowLayout, rowIndex) => {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('row');

        rowLayout.forEach((seatType, seatIndex) => {
          const seatNumber = `${String.fromCharCode(65 + rowIndex)}${String(seatIndex + 1).padStart(2, '0')}`;
          const seatDiv = document.createElement('div');
          seatDiv.classList.add('seat', seatType);
          seatDiv.textContent = seatNumber;
          seatDiv.dataset.seat = seatNumber;

          seatDiv.addEventListener('click', () => toggleSeat(seatDiv, seatType, seatNumber));
          rowDiv.appendChild(seatDiv);
        });

        seatContainer.appendChild(rowDiv);
      });

      // Hàm toggle chọn ghế
      function toggleSeat(seat, seatType, seatNumber) {
        seat.classList.toggle('selected');
        if (selectedSeats.includes(seatNumber)) {
          selectedSeats = selectedSeats.filter((seat) => seat !== seatNumber);
        } else {
          selectedSeats.push(seatNumber);
        }
        updateSelection();
      }

      // Cập nhật trạng thái chọn và tổng tiền
      function updateSelection() {
        document.getElementById('selected-seats').textContent = selectedSeats.join(', ') || 'None';

        let totalPrice = 0;
        selectedSeats.forEach((seat) => {
          const seatDiv = document.querySelector(`div[data-seat="${seat}"]`);
          const seatType = seatDiv.classList.contains('regular') ? 'regular' : seatDiv.classList.contains('couple') ? 'couple' : 'vip';
          totalPrice += ticketPrices[seatType];
        });

        document.getElementById('total-price').textContent = totalPrice.toLocaleString();
      }

      document.getElementById('next-btn').addEventListener('click', () => {
        if (selectedSeats.length > 0) {
          alert(`Bạn đã chọn các ghế: ${selectedSeats.join(', ')}. Tổng tiền: ${document.getElementById('total-price').textContent} VND`);
          // Điều hướng sang trang chọn combo nước bắp
          window.location.href = 'comboselection.html'; // Thay thế bằng đường dẫn trang combo của bạn
        } else {
          alert('Vui lòng chọn ghế trước khi tiếp tục.');
        }
      });
      
    </script>
  </body>
</html>
